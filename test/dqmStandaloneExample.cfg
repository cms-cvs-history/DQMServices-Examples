process test={
    
    untracked PSet maxEvents = {untracked int32 input = 10000}
    source = EmptySource {}
    
    # back-end interface service
    service = DaqMonitorROOTBackEnd{}
    
    # MonitorDaemon configuration
    # enable this if you would like to feed info down to a collector
    service = MonitorDaemon {
    # if true, will automatically start DQM thread in background
         untracked bool AutoInstantiate=true
    # if >=0, upon a connection problem, the source will automatically 
    # attempt to reconnect with a time delay (secs) specified here 
    # (default: 5)
         untracked int32 reconnect_delay = 5
    # collector hostname; examples: localhost(default),lxcmse2.cern.ch, etc
         untracked string DestinationAddress = "localhost"
    # port for communicating with collector (default: 9090)
         untracked int32 SendPort = 9090
    # monitoring period in ms (i.e. how often monitoring elements 
    # are shipped to the collector; default: 1000)
         untracked int32 UpdateDelay = 1000
    # maximum # of reconnection attempts upon connection problems (default: 10)
         untracked int32 maxAttempts2Reconnect   = 10
    # name of DQM source (default: DQMSource)
         untracked string NameAsSource = "Example"
    }
    
    # send source _AND_ client histograms out to collector every 5000 events
    service = DQMShipMonitoring{
	// event-period for shipping monitoring to collector (default: 25)
	// untracked uint32 period = 5000
    }
    
    # DQM Source program 
    # code in DQMServices/Daemon/src/DQMSourceExample.cc
    module dqmSource = DQMSourceExample{
	# Base name for monitor folders and output file		
	untracked string monitorName = "DQMExampleSource"
	# Operate every N events
	untracked int32 prescaleEvt = 10
    }

    # run the quality tests as defined in QualityTests.xml
    module qTester = QualityTester {
	untracked int32 QualityTestPrescaler = 5000
    }

    # DQM Client program
    # code in DQMServices/Examples/src/DQMExampleClient.cc
    # notes:
    module dqmClient = DQMClientExample {
	# Base name for monitor folders and output file		
	untracked string monitorName = "DQMExampleClient"
	# Operate every N lumi sections
	untracked int32 prescaleLS  = -1
	# Operate every N events
	untracked int32 prescaleEvt  = 100
    }
//    # DQM Online Environment
//    module dqmEnv = DQMEnvironment {
//    //   untracked bool online = true 
//    }

    
    # DQM Online File saver module
    module dqmSaver = DQMFileSaver {
        # subsystem name (appears in filename)
        # default is: filename is taken from SourceName
        #             (toplevel of me-dir-tree) fixme
        untracked string fileName = "SubsystemName"
	//# environment flag (default: "Online")
	//# FIXME should be implemented in dbe::save first
        //bool environment = "Online"
        # Save file every N lumi sections (-1: disabled)
        untracked int32 prescaleLS = -1
        # Save file every N events (-1: disabled)
        untracked int32 prescaleEvt = -1
        # Save file every N minutes (-1: disabled)
        untracked int32 prescaleTime = -1
        # Save at end of run, runnumber in filename (default: true)
        untracked bool saveAtRunEnd = true
        # Save at end of job, no runnumber in filename (default: false)
        untracked bool saveAtJobEnd = false
    }

    # output into logfiles (verbose)
    service = MessageLogger {
	untracked vstring destinations = { 
	    "detailedInfo" , "critical" , "cout"
	}
	untracked vstring debugModules = { "*" }
	untracked PSet critical     = { untracked string threshold = "ERROR"   }
	untracked PSet detailedInfo = { untracked string threshold = "INFO"    } 
	untracked PSet cout = {
	    untracked string threshold = "WARNING"
	    untracked bool noLineBreaks = true
	    untracked PSet WARNING = {untracked int32 limit = 0 }
	}
    }	
    
//    path p ={dqmSource & qTester & dqmClient & dqmEnv & dqmSaver }
    path p ={dqmSource & qTester & dqmClient & dqmSaver }

} 
