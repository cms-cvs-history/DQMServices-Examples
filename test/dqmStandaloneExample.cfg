process test={
    
    source = EmptySource {
	# Number of events program should run
	untracked int32 maxEvents = 1000000
    }
    
    # back-end interface service
    service = DaqMonitorROOTBackEnd{}
    
    # MonitorDaemon configuration
    include "DQMServices/Daemon/test/data/dqm_monitorDaemon.cfi"
    
    # DQM Source program 
    # code in DQMServices/Daemon/src/DQMSourceExample.cc
    module dqmSource = DQMSourceExample{}

    # run the quality tests as defined in QualityTests.xml
    module qTester = QualityTester {
	untracked int32 QualityTestPrescaler = 5000
    }

    # DQM Client program
    # code in DQMServices/Examples/src/MonitorClient.cc
    # notes:
    # * the prescale is a temporary kludge to avoid call of client on each event
    #   in the next version the EDAnalyzer transition endLuminosityBlock 
    #   should be used
    # * the client performs a fit on h4 every 5000 events
    module dqmClient = MonitorClient {
	untracked string folderRoot = ""
	untracked bool runningStandalone = true
	untracked int32 diagnosticPrescale = 5000	
    }

    # send source _AND_ client histograms out to collector every 5000 events
    service = DQMShipMonitoring{
	// event-period for shipping monitoring to collector (default: 25)
	untracked uint32 period = 5000
    }

    # output into logfiles (verbose)
    service = MessageLogger {
	untracked vstring destinations = { 
	    "detailedInfo" , "critical" , "cout"
	}
	untracked vstring debugModules = { "*" }
	untracked PSet critical     = { untracked string threshold = "ERROR"   }
	untracked PSet detailedInfo = { untracked string threshold = "INFO"    } 
	untracked PSet cout = {
	    untracked string threshold = "WARNING"
	    untracked bool noLineBreaks = true
	    untracked PSet WARNING = {untracked int32 limit = 0 }
	}
    }	
    
    path p ={dqmSource & qTester & dqmClient}

} 
